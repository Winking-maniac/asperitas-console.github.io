# Сопровождение развёртывания на базе дистрибутива Asperitas


## Развёрнутые сервера (общий список)

Перейдите во вкладку _Deployed servers_. 

![](../../../images/all-servers.png)

При чистом старте это окно будет пустым. Так как в системе ещё не было создано ни одного сервера.


### Развёрнутые сервера (список одного развёртывания)

Перейдите во вкладку _Servers list_. 

![](../../../images/stack-servers.png)

## Обновление узлов 

### Обновление системы узла развёртывания

При обнаружении уязвимостей или выходе малых обновлений компонентов системы необходимо обновить пакеты, 
а также контейнеры системы, которые отвечают основным компонентам системы. 

В первую очередь необходимо обновить систему 
~~~shell
sudo dnf update 
~~~

Далее обновите список образов контейнеров для установки: 
~~~shell
cat container_images | xargs -I {} sudo skopeo copy --src-tls-verify=false --dest-tls-verify=false \
docker://source-images-server/asperitos/{}:latest \
docker://localhost:13787/asperitos/{}:latest
~~~
### Обновление узлов вычисления 

Так как при обновлении все контейнеры пересоздаются - то будет пересоздан и контейнер _nova_libvirt_, отвечающий за создание виртуальных машин. 
При этом все виртуальные машины останавливаются. 

## Добавление SSL/TLS для публичных сервисов API

1. В настройках для развёртывания зайти во вкладку `Endpoint Data`.
1. Под заголовком `TLS` нажать кнопку `< use >`.
2. Далее нажать кнопку `< Generate Map/Ctrl+A >`.
3. Далее зайти во вкладку `Service Settings`.
4. Добавить свойство `EnableTls`
5. Заполнить значения для сертификата и ключа.
5. Если сертификат планируется самоподписанный, то добавить свойство `InjectTrustAnchor` и заполнить root сертификат.
6. Запустить апдейт стека и сервисов